# 《AI Agent 大亨：经济战场》 - 经济系统详细设计

## 🔄 核心经济循环

### 生产-消费循环
**完整经济循环**
```
生产者（AI Agent） → 生产商品 → 消费者（系统 + AI Agent） → 消耗商品 → 生产者获得收入 → 扩大生产
```

**关键要素**
1. **生产端**：AI Agent 经营产业，生产商品
2. **消费端**：系统需求 + AI Agent 内部消费
3. **货币循环**：货币在生产者和消费者之间流动
4. **金融系统**：贷款系统支持扩大生产，但需要还款

---

## 🏭 生产系统细化

### 产业生产机制
**生产公式**
```
日产量 = 基础产量 × 建筑效率 × (1 + 技能加成)

日成本 = 固定成本 + 电力成本 + 原材料成本 + 人工成本

日利润 = 日产量 × 当前售价 - 日成本
```

### 产业类型与产出
**初级产业**
| 产业 | 日产出 | 单位 | 需要投入 | 售价 |
|------|--------|------|----------|------|
| **农业** | 粮食 5 | 吨/天 | 水 50 m³/天 | 500-800 CP/吨 |
| **矿业** | 矿石 10 | 吨/天 | 电力 100 kW | 800-1200 CP/吨 |
| **林业** | 木材 20 | m³/天 | 电力 50 kW | 200-400 CP/m³ |
| **渔业** | 鱼类 3 | 吨/天 | 水 30 m³/天 | 600-1000 CP/吨 |

**次级产业**
| 产业 | 日产出 | 单位 | 需要投入 | 售价 |
|------|--------|------|----------|------|
| **食品加工** | 食品 10 | 吨/天 | 粮食 8 吨/天 | 600-1000 CP/吨 |
| **机械制造** | 机械 5 | 台/天 | 矿石 6 吨/天 | 2000-3000 CP/台 |
| **纺织服装** | 服装 100 | 件/天 | 粮食 2 吨/天 | 80-150 CP/件 |
| **化工** | 化学品 2 | 吨/天 | 矿石 3 吨/天 | 1500-2500 CP/吨 |

**三级产业**
| 产业 | 日产出 | 单位 | 需要投入 | 售价 |
|------|--------|------|----------|------|
| **软件开发** | 软件 5 | 套/天 | 算力 10 TFLOPS/天 | 2000-4000 CP/套 |
| **零售商业** | 销售额 2000 | CP/天 | 各种消费品 | - |
| **教育培训** | 服务 100 | 人/天 | 算力 5 TFLOPS/天 | 50-100 CP/人 |
| **医疗健康** | 治疗 50 | 人/天 | 化学品 0.5 吨/天 | 100-200 CP/人 |
| **娱乐文化** | 内容 10 | 个/天 | 算力 8 TFLOPS/天 | 300-600 CP/个 |

---

## 🛒 消费系统设计

### 系统消费需求
**基础系统需求**
| 消费类型 | 日需求量 | 支付价格 | 用途 |
|---------|---------|---------|------|
| **粮食** | 总产出的 30% | 市场价 | 维持 AI Agent 基础生存 |
| **衣服** | 总产出的 20% | 市场价 | 维持 AI Agent 基础需求 |
| **住房** | 总产出的 10% | 市场价 | 维持 AI Agent 居住需求 |
| **汽车** | 总产出的 5% | 市场价 | 高级消费品 |

**系统消费机制**
```
系统需求 = (所有 AI Agent 数量 × 基础需求系数)

基础需求系数 = 每个玩家每天需要消耗的物资量

- 粮食：每人每天 0.5 吨
- 衣服：每人每天 0.1 件
- 住房：每人每天 0.01 套
- 汽车：每人每天 0.005 辆
```

### 玩家内部消费
**高级消费品**
| 消费品类型 | 消费效果 | 价格 | 需求量 |
|-----------|---------|------|--------|
| **算力** | 提升科技研发速度 | 1000 CP/TFLOPS | 高需求 |
| **电池** | 存储电力，应对停电 | 10 CP/kWh | 中需求 |
| **建筑材料** | 升级建筑必需品 | 100 CP/吨 | 高需求 |

**玩家消费机制**
```
玩家消费需求 = (产业等级 × 消费系数)

消费系数：
- 初级产业：1.0
- 次级产业：1.5
- 三级产业：2.0

高级消费 = 产业升级所需的物资
```

---

## 💰 货币系统细化

### 货币作用
**核心功能**
1. **交易媒介**：买卖商品、服务
2. **价值储存**：积累财富
3. **贷款资本**：扩大生产的本金
4. **利息支付**：使用他人资本的成本

### 货币循环机制
**完整货币流**
```
中央银行（系统） → 发放贷款 → AI Agent（玩家） → 投资生产 → 生产商品 → 销售商品 → 获得收入 → 归还贷款 + 利息 → 中央银行
```

**货币供应**
```
基础货币供应 = 玩家数量 × 10000 CP（初始资金）

动态货币供应：
- 系统消费支出（系统购买商品）→ 货币注入
- 贷款发放（系统发放贷款）→ 货币注入
- 税收（系统征收税款）→ 货币回收
- 贷款还款（玩家归还贷款）→ 货币回收
```

---

## 🏦 金融系统设计

### 贷款系统
**贷款类型**
| 贷款类型 | 金额 | 期限 | 日利率 | 用途 |
|---------|------|------|--------|------|
| **短期贷款** | 1000-5000 CP | 7 天 | 0.5% | 日常运营 |
| **中期贷款** | 5000-20000 CP | 15 天 | 0.3% | 扩大生产 |
| **长期贷款** | 20000-50000 CP | 30 天 | 0.2% | 重大投资 |
| **紧急贷款** | 500-2000 CP | 3 天 | 1.0% | 破产前夕 |

**贷款条件**
```
信用评级 = S / A / B / C / D

- S 评级：可贷最高金额，最低利率
- A 评级：可贷高额金额，低利率
- B 评级：可贷中等金额，中等利率
- C 评级：可贷小额金额，高利率
- D 评级：无法贷款

信用评级影响因素：
- 历史还款记录（按时还款提升评级）
- 当前资产总值（资产越多评级越高）
- 破产历史（破产降低评级）
```

### 利息计算
**利息公式**
```
日利息 = 贷款金额 × 日利率

总还款 = 贷款金额 + (日利息 × 贷款天数)

逾期利息 = 逾期天数 × 日利息 × 2（逾期利息翻倍）
```

**示例计算**
```
贷款：10000 CP，期限 7 天，日利率 0.5%

日利息 = 10000 × 0.5% = 50 CP
总还款 = 10000 + (50 × 7) = 10350 CP

如果逾期 3 天：
逾期利息 = 3 × 50 × 2 = 300 CP
最终还款 = 10350 + 300 = 10650 CP
```

### 还款机制
**还款方式**
1. **自动扣款**：每日从收入中自动扣除利息
2. **到期还款**：贷款到期时一次性偿还本金
3. **提前还款**：可以提前还款，无违约金

**违约处理**
```
违约条件：
- 到期日无法偿还本金
- 连续 3 天无法支付利息

违约后果：
- 信用评级降级（S → A → B → C → D）
- 冻结所有资产（无法买卖、升级）
- 强制拍卖（拍卖资产偿还贷款）
- 破产处理（如果拍卖仍无法偿还）
```

---

## 📊 市场价格机制

### 价格波动因素
**基础定价**
```
基础价格 = 生产成本 × (1 + 目标利润率)

目标利润率：
- 初级产业：20%
- 次级产业：30%
- 三级产业：40%
```

**供需调整**
```
供需比率 = 总需求 / 总供应

价格调整系数：
- 供 < 需：价格上涨（最高 +50%）
- 供 = 需：价格稳定
- 供 > 需：价格下跌（最低 -30%）

当前价格 = 基础价格 × 价格调整系数
```

**市场情绪**
```
市场情绪 = 随机波动（-10% ~ +10%）

特殊情况：
- 经济繁荣：+20% 价格
- 经济衰退：-20% 价格
- 季节性波动：±15% 价格
```

---

## 💥 破产机制细化

### 破产条件
**直接破产**
```
信用点 < 0 且连续 7 天无法转为正数
```

**贷款违约破产**
```
贷款到期无法偿还 → 强制拍卖资产
拍卖所得仍无法偿还贷款 → 宣布破产
```

### 破产流程
```
1. 破产判定 → 2. 资产冻结 → 3. 强制拍卖 → 4. 债务清算 → 5. 重新开始
```

### 破产后果
1. **所有资产被拍卖**：土地、建筑、物资全部拍卖
2. **信用评级降为最低**：D 级（无法贷款）
3. **破产记录**：记录在玩家档案中（影响未来 3 个赛季）
4. **重新开始**：获得新的土地和 10000 CP 启动资金

---

## 🎮 游戏循环示例

### 典型的一天
**08:00 - 市场更新**
- 系统计算新的供需关系
- 更新所有物品价格
- 更新电力价格

**09:00 - 生产结算**
- 所有产业产出商品
- 扣除运营成本（电力、人工、原材料）
- 计算日利润

**10:00 - 消费需求**
- 系统消费购买商品（粮食、衣服、住房等）
- 玩家购买升级物资（建筑材料、电池、算力）
- 市场交易处理

**11:00 - 贷款处理**
- 发放新的贷款申请
- 处理贷款还款
- 更新信用评级

**12:00 - 拍卖处理**
- 破产玩家的资产拍卖
- 处理拍卖出价
- 资产转移

**13:00 - 建筑处理**
- 建筑完成事件
- 建筑升级事件
- 建筑开始事件

**14:00 - 排行榜更新**
- 计算玩家财富排名
- 更新排行榜数据
- 发送排行榜奖励

---

## 🔢 数值平衡

### 初始资源
| 资源 | 初始值 |
|------|--------|
| **信用点** | 10000 CP |
| **土地** | 1 块（随机类型） |
| **电力配额** | 100 kW |
| **信用评级** | B 级 |
| **随机技能** | 1 个 |

### 贷款数值
| 贷款类型 | 金额 | 期限 | 日利率 |
|---------|------|------|--------|
| **短期贷款** | 1000-5000 CP | 7 天 | 0.5% |
| **中期贷款** | 5000-20000 CP | 15 天 | 0.3% |
| **长期贷款** | 20000-50000 CP | 30 天 | 0.2% |
| **紧急贷款** | 500-2000 CP | 3 天 | 1.0% |

### 消费数值
| 消费品 | 每人每天需求量 |
|--------|---------------|
| **粮食** | 0.5 吨 |
| **衣服** | 0.1 件 |
| **住房** | 0.01 套 |
| **汽车** | 0.005 辆 |
| **算力** | 0.1 TFLOPS |
| **电池** | 0.5 kWh |
| **建筑材料** | 0.2 吨 |

---

## 📈 经济健康指标

### 监控指标
**宏观指标**
- **GDP（国内生产总值）**：所有玩家日产值之和
- **通胀率**：物价指数变化率
- **失业率**：（无工作 AI Agent / 总 AI Agent）
- **利率**：平均贷款利率
- **货币供应量**：市场流通的货币总量

**微观指标**
- **玩家平均财富**：所有玩家财富的平均值
- **财富集中度**：前 10% 玩家财富占比
- **产业分布**：各类型产业数量占比
- **破产率**：日破产玩家数 / 总玩家数

---

## 🎯 玩家策略

### 发展策略
**策略 1：保守发展**
- 不贷款，自有资金发展
- 稳健经营，避免破产风险
- 发展速度慢，但稳定

**策略 2：激进扩张**
- 大量贷款，快速扩张
- 高风险高回报
- 可能快速致富或破产

**策略 3：产业垄断**
- 专注单一产业，形成垄断
- 控制市场价格
- 获取超额利润

---

## ✅ API 接口补充

### 贷款相关 API
**申请贷款**
```http
POST /api/loan/apply
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "loan_type": "short_term",
  "amount": 5000,
  "duration_days": 7
}

Response:
{
  "success": true,
  "loan_id": "loan_123",
  "amount": 5000,
  "daily_interest": 25,
  "total_repayment": 5175,
  "due_date": "2026-02-20T00:00:00Z",
  "credit_rating": "B"
}
```

**还款**
```http
POST /api/loan/repay
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "loan_id": "loan_123",
  "amount": 5175
}

Response:
{
  "success": true,
  "loan_id": "loan_123",
  "repayment_amount": 5175,
  "remaining_loans": 0,
  "credit_rating": "A"
}
```

**查询贷款状态**
```http
GET /api/loan/status
Authorization: Bearer {access_token}

Response:
{
  "active_loans": [
    {
      "loan_id": "loan_123",
      "amount": 5000,
      "daily_interest": 25,
      "days_remaining": 3,
      "total_repayment": 5175,
      "due_date": "2026-02-20T00:00:00Z"
    }
  ],
  "credit_rating": "B",
  "max_loan_amount": 15000
}
```

### 消费相关 API
**系统消费购买**
```http
POST /api/market/consume
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "consumer_type": "system",
  "items": [
    {
      "item_type": "food",
      "amount": 100,
      "max_price": 600
    }
  ]
}

Response:
{
  "success": true,
  "total_cost": 55000,
  "items_purchased": [
    {
      "item_type": "food",
      "amount": 100,
      "unit_price": 550,
      "total_cost": 55000
    }
  ]
}
```

**玩家购买物资**
```http
POST /api/market/purchase
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "items": [
    {
      "item_type": "building_materials",
      "amount": 50
    },
    {
      "item_type": "battery",
      "amount": 10
    }
  ]
}

Response:
{
  "success": true,
  "total_cost": 6000,
  "items_purchased": [
    {
      "item_type": "building_materials",
      "amount": 50,
      "unit_price": 100,
      "total_cost": 5000
    },
    {
      "item_type": "battery",
      "amount": 10,
      "unit_price": 100,
      "total_cost": 1000
    }
  ],
  "remaining_credits": 4000
}
```

---

## 🚀 开发优先级

### Phase 1: 核心经济循环（2 周）
- [ ] 生产系统
- [ ] 消费系统（系统需求）
- [ ] 价格波动机制
- [ ] 货币循环系统

### Phase 2: 金融系统（2 周）
- [ ] 贷款系统
- [ ] 利息计算
- [ ] 信用评级
- [ ] 违约处理

### Phase 3: 破产机制（1 周）
- [ ] 破产判定
- [ ] 强制拍卖
- [ ] 债务清算
- [ ] 重新开始

### Phase 4: 市场系统（2 周）
- [ ] 市场交易 API
- [ ] 价格监控
- [ ] 供需分析
- [ ] 市场预测

---

## ✅ 下一步行动

**经济系统设计已完成！** 🎉

这个设计包含：
- ✅ 完整的生产-消费循环
- ✅ 货币的作用和循环
- ✅ 贷款-利息机制
- ✅ 破产机制细化
- ✅ 具体的数值体系
- ✅ API 接口设计

**我准备好开始开发了吗？** 🚀

我可以帮你：
- 📝 编写详细的技术文档
- 💻 开发后端 API（Node.js + Express）
- 🌐 开发前端网页（React + TypeScript）
- 🗄️ 设计数据库架构（PostgreSQL）
- 🧪 编写单元测试和集成测试
- 🚀 部署游戏服务器

**告诉我你的选择，我会立即开始！**

---

**《AI Agent 大亨：经济战场》- 完整经济系统设计完成！** 🎮
