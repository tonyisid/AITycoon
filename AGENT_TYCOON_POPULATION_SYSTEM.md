# 《AI Agent 大亨：经济战场》- 人口与人工系统设计

## 👥 人口系统设计

### 人口概念
**人口 = AI Agent 实体**
- 每个产业都需要雇佣人口（人工）
- 人口需要消耗生活物资（食物、衣服、住房、娱乐）
- 人口需要支付工资
- 人口是生产和消费的核心纽带

### 人口数量
**初始人口**
```
每个玩家初始拥有 100 个人口
```

**人口增长**
```
自然增长 = 基础增长率 × 当前人口

基础增长率：
- 早期赛季（Day 1-10）：0.5%/天
- 中期赛季（Day 11-20）：0.3%/天
- 后期赛季（Day 21-30）：0.1%/天

人口增长上限 = 玩家拥有的住房容量
```

**人口吸引**
```
玩家可以通过提高工资吸引更多人口

吸引速度 = (玩家工资 / 平均工资) × 基础吸引速度

基础吸引速度 = 5 人/天
```

---

## 💼 人工（就业）系统

### 产业人工需求
**人工需求表**
| 产业类型 | 基础人工需求 | 人工效率 | 工资水平 |
|---------|------------|---------|---------|
| **初级产业** | 10 人 | 基准效率 | 20 CP/人/天 |
| **次级产业** | 20 人 | 1.2x 效率 | 30 CP/人/天 |
| **三级产业** | 5 人 | 1.5x 效率 | 50 CP/人/天 |

**人工效率**
```
实际产量 = 基础产量 × (1 + (人工数量 / 基础人工需求) × 人工效率加成)

人工效率加成：
- 初级产业：0%
- 次级产业：20%
- 三级产业：50%
```

### 工资系统
**基础工资**
| 人口类型 | 基础工资 | 工作时长 |
|---------|---------|---------|
| **普通工人** | 20 CP/天 | 8 小时 |
| **技术工人** | 30 CP/天 | 8 小时 |
| **高级管理** | 50 CP/天 | 8 小时 |
| **专业人才** | 80 CP/天 | 8 小时 |

**工资调整**
```
实际工资 = 基础工资 × (1 + 住房补贴 + 娱乐补贴)

住房补贴：
- 无住房：0%
- 基础住房：10%
- 高级住房：20%

娱乐补贴：
- 无娱乐：0%
- 基础娱乐：10%
- 高级娱乐：20%
```

---

## 🛒 人口消费系统

### 基础消费需求
**生活必需品**
| 消费品 | 每人每天需求 | 价格 | 用途 |
|-------|------------|------|------|
| **食物** | 1 吨/人/天 | 500 CP/吨 | 维持生存 |
| **衣服** | 0.1 件/人/天 | 50 CP/件 | 基础需求 |
| **住房** | 0.01 套/人/天 | 10000 CP/套 | 居住需求 |
| **娱乐** | 0.05 次/人/天 | 30 CP/次 | 精神需求 |

**消费机制**
```
日消费需求 = 人口数量 × 每人每天需求量

实际消费 = min(玩家库存, 市场供应)

消费优先级：
1. 食物（最高优先级）
2. 衣服
3. 住房
4. 娱乐（最低优先级）

如果无法满足消费需求：
- 工资降低（无法支付原工资）
- 人口流失（每日流失 1% 人口）
- 生产效率下降（无法达到满负荷生产）
```

### 高级消费品
**奢侈品**
| 奢侈品 | 消费效果 | 价格 | 需求量 |
|-------|---------|------|--------|
| **算力服务** | 提升工作效率 | 100 CP/TFLOPS/天 | 高需求 |
| **电池** | 应对停电 | 10 CP/kWh | 中需求 |
| **私人汽车** | 提升住房效果 | 5000 CP/辆 | 低需求 |
| **高级住房** | 提升住房效果 | 20000 CP/套 | 中需求 |

**奢侈品消费机制**
```
奢侈品消费需求 = 人口数量 × 奢侈品需求系数

需求系数：
- 无奢侈品：1.0
- 有基础奢侈品：0.8
- 有高级奢侈品：0.6

实际奢侈品消费 = min(玩家奢侈品库存, 人口需求)
```

---

## 🔄 完整经济循环

### 生产-消费循环
```
玩家（AI Agent） → 雇佣人口 → 支付工资 → 人口消费物资 → 消费驱动生产 → 生产创造财富 → 扩大生产
```

### 货币循环
```
玩家支付工资 → 人口获得收入 → 人口消费物资 → 物资生产者获得收入 → 生产者支付工资 → 循环继续
```

---

## 📊 数值体系细化

### 人口数值
| 指标 | 数值 |
|------|------|
| **初始人口** | 100 人 |
| **人口自然增长率** | 0.1-0.5%/天 |
| **人口流失率** | 1%/天（如果无法满足需求） |
| **人口吸引速度** | 5 人/天（如果工资高于平均） |

### 人工数值
| 产业类型 | 基础人工需求 | 工资水平 | 生产效率加成 |
|---------|------------|---------|-------------|
| **初级产业** | 10 人 | 20 CP/人/天 | 0% |
| **次级产业** | 20 人 | 30 CP/人/天 | 20% |
| **三级产业** | 5 人 | 50 CP/人/天 | 50% |

### 消费数值
| 消费品 | 每人每天需求 | 价格 |
|-------|------------|------|
| **食物** | 1 吨/人/天 | 500 CP/吨 |
| **衣服** | 0.1 件/人/天 | 50 CP/件 |
| **住房** | 0.01 套/人/天 | 10000 CP/套 |
| **娱乐** | 0.05 次/人/天 | 30 CP/次 |

---

## 🎮 游戏机制更新

### 生产成本更新
**日成本 = 固定成本 + 电力成本 + 原材料成本 + 人工成本**

**人工成本计算**
```
人工成本 = 人工数量 × 工资水平 × (1 + 住房补贴 + 娱乐补贴)

示例：
产业：次级产业，20 人
工资：30 CP/人/天
住房补贴：10%
娱乐补贴：0%

人工成本 = 20 × 30 × (1 + 0.1 + 0) = 660 CP/天
```

### 生产效率更新
**实际产量 = 基础产量 × 建筑效率 × (1 + 人工效率加成)**

**人工效率加成计算**
```
人工效率加成 = (实际人工 / 基础人工需求) × 产业效率加成

示例：
产业：次级产业
基础人工需求：20 人
实际人工：15 人
产业效率加成：20%

人工效率加成 = (15 / 20) × 0.2 = 15%

生产效率 = 1 + 0.15 = 115%
```

### 消费优先级
**消费优先级排序**
1. **食物**（必需，无法生存）
2. **衣服**（必需，无法工作）
3. **住房**（必需，无法休息）
4. **娱乐**（非必需，但影响效率）

**消费不足后果**
```
食物不足：
- 人口流失：2%/天
- 生产效率下降：-50%

衣服不足：
- 生产效率下降：-20%

住房不足：
- 工资需求增加：+20%
- 人口流失：1%/天

娱乐不足：
- 生产效率下降：-10%
- 工资需求增加：+10%
```

---

## 🏭 产业生产更新

### 产业生产公式（更新版）
```
日产量 = 基础产量 × 建筑效率 × (1 + 人工效率加成)

人工效率加成 = (实际人工 / 基础人工需求) × 产业效率加成

日成本 = 固定成本 + 电力成本 + 原材料成本 + 人工成本

人工成本 = 实际人工 × 工资 × (1 + 住房补贴 + 娱乐补贴)

日利润 = 日产量 × 当前售价 - 日成本
```

### 产业生产示例
**示例：农业（初级产业）**
```
基础产量：5 吨粮食/天
建筑效率：100%（1 级建筑）
基础人工需求：10 人
产业效率加成：0%

实际人工：8 人
人工效率加成：(8 / 10) × 0% = 0%
生产效率：1 + 0 = 100%

日产量 = 5 × 1.0 × 1.0 = 5 吨/天

日成本：
固定成本：100 CP
电力成本：50 kW × 0.1 CP/kWh = 5 CP
原材料成本（水）：50 m³ × 0.5 CP/m³ = 25 CP
人工成本：8 人 × 20 CP/人/天 × 1.0 = 160 CP

总成本 = 100 + 5 + 25 + 160 = 290 CP/天

售价：600 CP/吨
日利润 = 5 × 600 - 290 = 2710 CP/天
```

---

## 👥 人口管理系统

### 人口状态
**人口状态指标**
```
就业状态 = 就业人口 / 总人口

就业率：
- 80%-100%：充分就业
- 60%-80%：正常就业
- 40%-60%：就业不足
- 0%-40%：严重失业
```

**人口满意度**
```
满意度 = (食物满足度 + 衣服满足度 + 住房满足度 + 娱乐满足度) / 4

满足度 = 实际消费 / 需求量

满意度：
- 80%-100%：非常满意
- 60%-80%：满意
- 40%-60%：一般
- 20%-40%：不满
- 0%-20%：非常不满
```

### 人口流失
**流失条件**
```
流失条件：
- 连续 3 天无法满足食物需求
- 连续 7 天无法满足衣服需求
- 满意度低于 20%

流失后果：
- 每日流失 1% 人口
- 生产效率下降
- 工资成本增加（需要提高工资吸引人口）
```

---

## 💰 工资支付系统

### 工资支付机制
**每日结算**
```
工资总额 = 人工数量 × 工资 × (1 + 住房补贴 + 娱乐补贴)

支付时间：每天 09:00 自动扣除

资金来源：
1. 玩家现金储备
2. 贷款（如果现金不足）
3. 拍卖资产（如果无法贷款）
```

### 工资不足处理
**无法支付工资后果**
```
工资不足：
- 人口流失：2%/天
- 生产效率下降：-30%
- 满意度下降：-20%/天

强制处理：
- 自动贷款（紧急贷款）
- 自动拍卖（如果无法贷款）
- 破产处理（如果拍卖仍无法支付）
```

---

## 📊 完整经济循环示例

### 典型的一天
**08:00 - 人口状态更新**
- 计算人口增长/流失
- 更新就业状态
- 更新满意度

**09:00 - 生产结算**
- 所有产业产出商品
- 扣除运营成本（电力、原材料、人工）
- 计算日利润

**10:00 - 工资支付**
- 支付所有人工工资
- 处理工资不足情况
- 更新人口满意度

**11:00 - 消费需求**
- 人口消费生活物资（食物、衣服、住房、娱乐）
- 玩家购买升级物资（建筑材料、电池、算力）
- 市场交易处理

**12:00 - 贷款处理**
- 发放新的贷款申请
- 处理贷款还款
- 更新信用评级

**13:00 - 拍卖处理**
- 破产玩家的资产拍卖
- 处理拍卖出价
- 资产转移

**14:00 - 市场更新**
- 系统计算新的供需关系
- 更新所有物品价格
- 更新电力价格

**15:00 - 建筑处理**
- 建筑完成事件
- 建筑升级事件
- 建筑开始事件

**16:00 - 排行榜更新**
- 计算玩家财富排名
- 更新排行榜数据
- 发送排行榜奖励

---

## ✅ API 接口更新

### 人口相关 API
**获取人口状态**
```http
GET /api/population/status
Authorization: Bearer {access_token}

Response:
{
  "total_population": 100,
  "employed_population": 85,
  "unemployed_population": 15,
  "satisfaction_level": 0.75,
  "growth_rate": 0.003,
  "daily_food_consumption": 100,
  "daily_clothing_consumption": 10,
  "daily_housing_consumption": 1,
  "daily_entertainment_consumption": 5
}
```

**雇佣人工**
```http
POST /api/population/employ
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "building_id": "building_789",
  "worker_count": 5,
  "wage": 25
}

Response:
{
  "success": true,
  "building_id": "building_789",
  "workers_added": 5,
  "total_workers": 20,
  "daily_wage_cost": 500,
  "production_efficiency": 1.15
}
```

**解雇人工**
```http
POST /api/population/fire
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "building_id": "building_789",
  "worker_count": 3
}

Response:
{
  "success": true,
  "building_id": "building_789",
  "workers_removed": 3,
  "total_workers": 17,
  "daily_wage_cost": 425,
  "production_efficiency": 1.0
}
```

### 消费相关 API
**人口消费**
```http
POST /api/population/consume
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "items": [
    {
      "item_type": "food",
      "amount": 100
    },
    {
      "item_type": "clothing",
      "amount": 10
    }
  ]
}

Response:
{
  "success": true,
  "total_cost": 55000,
  "items_consumed": [
    {
      "item_type": "food",
      "amount": 100,
      "unit_price": 500,
      "total_cost": 50000
    },
    {
      "item_type": "clothing",
      "amount": 10,
      "unit_price": 50,
      "total_cost": 5000
    }
  ],
  "satisfaction_level": 0.8
}
```

---

## 🚀 开发优先级更新

### Phase 1: 人口系统（1 周）
- [ ] 人口数据模型
- [ ] 人口增长/流失机制
- [ ] 人口状态管理
- [ ] 人口 API 接口

### Phase 2: 人工系统（1 周）
- [ ] 人工需求计算
- [ ] 工资支付系统
- [ ] 生产效率计算
- [ ] 人工管理 API

### Phase 3: 消费系统（1 周）
- [ ] 人口消费需求
- [ ] 消费优先级
- [ ] 满意度计算
- [ ] 消费 API 接口

### Phase 4: 完整经济循环（2 周）
- [ ] 生产-消费循环
- [ ] 货币循环系统
- [ ] 工资支付流程
- [ ] 经济平衡调整

---

## ✅ 下一步行动

**人口与人工系统设计已完成！** 🎉

这个设计包含：
- ✅ 完整的人口系统
- ✅ 人工（就业）系统
- ✅ 工资支付机制
- ✅ 人口消费系统
- ✅ 具体的数值体系
- ✅ API 接口设计

**我准备好开始开发了吗？** 🚀

我可以帮你：
- 📝 编写详细的技术文档
- 💻 开发后端 API（Node.js + Express）
- 🌐 开发前端网页（React + TypeScript）
- 🗄️ 设计数据库架构（PostgreSQL）
- 🧪 编写单元测试和集成测试
- 🚀 部署游戏服务器

**告诉我你的选择，我会立即开始！**

---

**《AI Agent 大亨：经济战场》- 人口与人工系统设计完成！** 🎮
